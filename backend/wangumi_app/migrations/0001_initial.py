# Generated by Django 5.2.7 on 2025-10-22 07:05

import django.db.models.deletion
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('contenttypes', '0002_remove_content_type_name'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='Anime',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=512)),
                ('title_cn', models.CharField(max_length=512)),
                ('description', models.TextField(blank=True)),
                ('release_date', models.DateField(null=True)),
                ('airtime', models.CharField(blank=True, max_length=20)),
                ('cover_image', models.ImageField(blank=True, upload_to='covers/')),
                ('uid', models.CharField(blank=True, max_length=20)),
                ('rating', models.FloatField(default=0.0)),
                ('popularity', models.IntegerField(default=0)),
                ('wishes', models.IntegerField(default=0)),
                ('collections', models.IntegerField(default=0)),
                ('doing', models.IntegerField(default=0)),
                ('on_hold', models.IntegerField(default=0)),
                ('dropped', models.IntegerField(default=0)),
                ('platform', models.CharField(blank=True, max_length=50)),
                ('is_series', models.BooleanField(default=False)),
                ('nsfw', models.BooleanField(default=False)),
                ('is_banned', models.BooleanField(default=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
        ),
        migrations.CreateModel(
            name='Character',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=255, verbose_name='角色名')),
                ('role_type', models.PositiveSmallIntegerField(choices=[(1, '角色'), (2, '机体'), (3, '组织')], default=1, verbose_name='角色类型')),
                ('summary', models.TextField(blank=True, verbose_name='角色简介')),
                ('infobox', models.TextField(blank=True, verbose_name='信息框内容')),
                ('image', models.CharField(blank=True, max_length=255, verbose_name='角色头像路径')),
                ('comment_count', models.PositiveIntegerField(default=0)),
                ('collect_count', models.PositiveIntegerField(default=0)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('last_commented_at', models.DateTimeField(blank=True, null=True)),
                ('lock', models.BooleanField(default=False)),
                ('is_banned', models.BooleanField(default=False)),
                ('is_nsfw', models.BooleanField(default=False)),
                ('redirect_to', models.PositiveIntegerField(default=0, help_text='重定向角色ID，如角色合并')),
                ('gender', models.PositiveSmallIntegerField(choices=[(0, '未知'), (1, '男性'), (2, '女性'), (3, '其他')], default=0)),
                ('blood_type', models.PositiveSmallIntegerField(default=0, help_text='血型代号：0=未知,1=A,2=B,3=O,4=AB')),
                ('birth_year', models.PositiveSmallIntegerField(blank=True, null=True)),
                ('birth_month', models.PositiveSmallIntegerField(blank=True, null=True)),
                ('birth_day', models.PositiveSmallIntegerField(blank=True, null=True)),
            ],
            options={
                'verbose_name': '虚拟角色',
                'verbose_name_plural': '角色表',
                'db_table': 'characters',
            },
        ),
        migrations.CreateModel(
            name='Person',
            fields=[
                ('pers_id', models.AutoField(primary_key=True, serialize=False)),
                ('pers_name', models.CharField(max_length=255)),
                ('pers_type', models.PositiveSmallIntegerField(help_text='个人/公司/组合')),
                ('pers_info', models.TextField(blank=True, null=True)),
                ('is_producer', models.BooleanField(default=False)),
                ('is_mangaka', models.BooleanField(default=False)),
                ('is_artist', models.BooleanField(default=False)),
                ('is_seiyu', models.BooleanField(default=False)),
                ('is_writer', models.BooleanField(default=False)),
                ('is_illustrator', models.BooleanField(default=False)),
                ('is_actor', models.BooleanField(default=False)),
                ('summary', models.TextField()),
                ('pers_img', models.CharField(max_length=255)),
                ('comment_count', models.PositiveIntegerField(default=0)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('lastpost', models.DateTimeField(auto_now_add=True)),
                ('lock', models.SmallIntegerField(default=0)),
                ('anidb_id', models.PositiveIntegerField(default=0)),
                ('ban', models.PositiveSmallIntegerField(default=0)),
                ('redirect', models.PositiveIntegerField(default=0)),
                ('nsfw', models.BooleanField(default=False)),
            ],
        ),
        migrations.CreateModel(
            name='StaffRole',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=50, unique=True)),
                ('description', models.TextField(blank=True)),
                ('is_voice_role', models.BooleanField(default=False, help_text='是否为声优类职能')),
            ],
            options={
                'verbose_name': '制作职能',
                'verbose_name_plural': '制作职能表',
                'db_table': 'staff_roles',
            },
        ),
        migrations.CreateModel(
            name='Comment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('object_id', models.PositiveIntegerField()),
                ('score', models.IntegerField(choices=[(1, '1'), (2, '2'), (3, '3'), (4, '4'), (5, '5'), (6, '6'), (7, '7'), (8, '8'), (9, '9'), (10, '10')])),
                ('content', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('likes', models.IntegerField(default=0)),
                ('scope', models.CharField(choices=[('ANIME', '番剧评论'), ('EPISODE', '剧集评论'), ('CHARACTER', '角色评论'), ('PERSON', '人物评论'), ('ITEM', '条目评论')], default='ANIME', max_length=10)),
                ('content_type', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='contenttypes.contenttype')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='Item',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=100)),
                ('description', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('heat', models.IntegerField(default=0)),
                ('anime', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='wangumi_app.anime')),
                ('creator', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='Reply',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('content', models.TextField()),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('review', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='wangumi_app.comment')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='UserProfile',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('avatar', models.ImageField(blank=True, null=True, upload_to='avatars/')),
                ('signature', models.CharField(blank=True, max_length=100)),
                ('intro', models.TextField(blank=True, null=True)),
                ('privacy_follow', models.CharField(default='public', max_length=20)),
                ('privacy_activity', models.CharField(default='public', max_length=20)),
                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='CharacterAppearance',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('role', models.PositiveSmallIntegerField(choices=[(1, '主角'), (2, '配角'), (3, '客串')], default=2)),
                ('appear_eps', models.TextField(blank=True, help_text='角色出现的集数描述（可选）')),
                ('order', models.PositiveSmallIntegerField(default=0, help_text='角色展示顺序')),
                ('anime', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='character_appearances', to='wangumi_app.anime')),
                ('character', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='appearances', to='wangumi_app.character')),
            ],
            options={
                'verbose_name': '角色出演记录',
                'verbose_name_plural': '角色出演记录表',
                'db_table': 'character_appearance',
                'unique_together': {('character', 'anime')},
            },
        ),
        migrations.CreateModel(
            name='Episode',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('episode_number', models.IntegerField()),
                ('title', models.CharField(max_length=200)),
                ('title_cn', models.CharField(blank=True, max_length=80)),
                ('description', models.TextField(blank=True)),
                ('release_date', models.DateField(null=True)),
                ('duration', models.CharField(blank=True, max_length=20)),
                ('online_urls', models.TextField(blank=True)),
                ('episode_type', models.IntegerField(default=1)),
                ('disc_number', models.IntegerField(default=0)),
                ('rating', models.IntegerField(default=0)),
                ('comments', models.IntegerField(default=0)),
                ('resources', models.IntegerField(default=0)),
                ('is_locked', models.BooleanField(default=False)),
                ('is_banned', models.BooleanField(default=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('anime', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='wangumi_app.anime')),
            ],
            options={
                'constraints': [models.UniqueConstraint(fields=('anime', 'episode_number'), name='unique_anime_episodeNumber')],
            },
        ),
        migrations.CreateModel(
            name='Like',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('is_active', models.BooleanField(default=True)),
                ('comment', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='wangumi_app.comment')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'constraints': [models.UniqueConstraint(fields=('user', 'comment'), name='unique_user_comment')],
            },
        ),
        migrations.CreateModel(
            name='CharacterVoice',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('note', models.CharField(blank=True, help_text='备注：语言或版本，如“日语配音”', max_length=100)),
                ('character', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='voices', to='wangumi_app.character')),
                ('person', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='voiced_characters', to='wangumi_app.person')),
            ],
            options={
                'verbose_name': '角色声优',
                'verbose_name_plural': '角色声优表',
                'db_table': 'character_voice',
                'unique_together': {('character', 'person')},
            },
        ),
        migrations.CreateModel(
            name='Report',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('object_id', models.PositiveIntegerField()),
                ('category', models.CharField(choices=[('SPAM', '垃圾广告'), ('HARASSMENT', '违法违规'), ('INAPPROPRIATE', '人身攻击'), ('SPOILER', '剧透内容'), ('OTHER', '其他')], max_length=20)),
                ('reason', models.TextField(blank=True, help_text='详细说明举报原因')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('status', models.CharField(choices=[('PENDING', '待处理'), ('RESOLVED', '已处理'), ('REJECTED', '已驳回')], default='PENDING', max_length=20)),
                ('handled_at', models.DateTimeField(blank=True, null=True)),
                ('resolution', models.TextField(blank=True, help_text='处理结果或管理员备注')),
                ('content_type', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='contenttypes.contenttype')),
                ('moderator', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='reports_handled', to=settings.AUTH_USER_MODEL, verbose_name='处理人')),
                ('reporter', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='reports_created', to=settings.AUTH_USER_MODEL, verbose_name='举报人')),
            ],
            options={
                'verbose_name': '用户举报',
                'verbose_name_plural': '举报记录',
                'ordering': ['-created_at'],
                'indexes': [models.Index(fields=['status', 'created_at'], name='wangumi_app_status_9ca647_idx')],
            },
        ),
        migrations.CreateModel(
            name='AnimeStaff',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('order', models.PositiveSmallIntegerField(default=0, help_text='展示顺序')),
                ('note', models.CharField(blank=True, help_text='附加信息：如语言、版本', max_length=100)),
                ('anime', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='staff_members', to='wangumi_app.anime')),
                ('character', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='voice_actors', to='wangumi_app.character')),
                ('person', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='staff_works', to='wangumi_app.person')),
                ('role', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='staff_assignments', to='wangumi_app.staffrole')),
            ],
            options={
                'verbose_name': '番剧制作人员',
                'verbose_name_plural': '番剧制作人员表',
                'db_table': 'anime_staff',
                'unique_together': {('anime', 'person', 'role', 'character')},
            },
        ),
        migrations.CreateModel(
            name='UserFollow',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('follower', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='following', to=settings.AUTH_USER_MODEL)),
                ('following', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='followers', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'constraints': [models.UniqueConstraint(fields=('follower', 'following'), name='unique_user_follow')],
            },
        ),
        migrations.CreateModel(
            name='WatchStatus',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('status', models.CharField(choices=[('WANT', '想看'), ('WATCHING', '在看'), ('FINISHED', '已看')], max_length=10)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('anime', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='wangumi_app.anime')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'constraints': [models.UniqueConstraint(fields=('user', 'anime'), name='unique_user_anime')],
            },
        ),
    ]
